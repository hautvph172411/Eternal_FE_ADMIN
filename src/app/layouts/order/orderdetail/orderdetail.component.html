<div style="overflow-x: hidden;">
<div class="" style="display: block;">
  <div class="container-fluid h-custom">
    <div class="row d-flex justify-content-center h-100">
      <div class="col-md-6 col-lg-4 col-xl-2">
        <aside
          class="sidenav navbar navbar-vertical navbar-expand-xs fixed-start"
          id="sidenav-main"
          style="margin-left: 1px; box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
          background-image: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
          <div class="sidenav-header">
            <i class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
              aria-hidden="true" id="iconSidenav"></i>
            <a class="navbar-brand m-0" href=" https://demos.creative-tim.com/material-dashboard/pages/dashboard "
              target="_blank">
              <img src="./assets/img/favicon.png" class="navbar-brand-img h-100" alt="main_logo"
                style="border-radius: 7px;">
              <span class="ms-1 font-weight-bold text-white">Control Dashboard</span>
            </a>
          </div>
          <hr class="horizontal light mt-0 mb-2">

          <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
            <ul class="navbar-nav">

              <li class="nav-item">
                <a class="nav-link text-white " routerLink="/thongke">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                    <i class="material-icons opacity-10">align_vertical_bottom</i>
                  </div>

                  <span class="nav-link-text ms-1">Thống Kê</span>
                </a>
              </li>


              <li class="nav-item">
                <a class="nav-link text-white " [routerLink]="['/order']">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                    <i class="material-icons opacity-10">receipt_long</i>
                  </div>

                  <span class="nav-link-text ms-1">Quản lý đơn hàng</span>
                </a>
              </li>

              <li class="nav-item">
                <a class="nav-link text-white " routerLink="/category">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                    <i class="material-icons opacity-10">category</i>
                  </div>

                  <span class="nav-link-text ms-1">Danh mục</span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-white " routerLink="/brand">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                    <i class="material-icons opacity-10">event_note</i>
                  </div>

                  <span class="nav-link-text ms-1">Hãng </span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-white " routerLink="/tao-don-hang">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                    <i class="material-icons opacity-10">post_add</i>
                  </div>

                  <span class="nav-link-text ms-1">Tạo Đơn Hàng </span>
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link text-white " routerLink="/product">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">
                    <i class="material-icons opacity-10">post_add</i>
                  </div>

                  <span class="nav-link-text ms-1">Quản lý sản phẩm</span>
                </a>
              </li>

              <li class="nav-item">
                <a class="nav-link text-white " routerLink="/khuyenmai">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">

                    <i class="material-icons opacity-10">electric_bolt</i>
                  </div>

                  <span class="nav-link-text ms-1">Khuyến mại</span>
                </a>
              </li>
              <li class="nav-item">

                <a class="nav-link text-white " routerLink="/hoadoncho">

                  <div class="text-white text-center me-2 d-flex align-items-center justify-content-center">

                    <i class="material-icons opacity-10">sd_card_alert</i>
                  </div>

                  <span class="nav-link-text ms-1">Hóa đơn nháp</span>
                </a>
              </li>



            </ul>
          </div>

          <div class="sidenav-footer position-absolute w-100 bottom-0 ">
            <div class="mx-3">
              <a class="btn bg-gradient-primary mt-4 w-100"
                href="https://www.creative-tim.com/product/material-dashboard-pro?ref=sidebarfree" type="button">Eternal
                FE Admin</a>
            </div>

          </div>

        </aside>
      </div>
      <!-- <div class="col-md-11 col-lg-8 col-xl-7 offset-xl-1">
        <router-outlet></router-outlet>
      </div> -->
    </div>
  </div>
  <!--  <div-->
  <!--    class="d-flex flex-column flex-md-row text-center text-md-start justify-content-between py-4 px-4 px-xl-5 bg-primary">-->
  <!--    &lt;!&ndash; Copyright &ndash;&gt;-->
  <!--    <div class="text-white mb-3 mb-md-0">-->
  <!--      UD_22-->
  <!--    </div>-->
  <!--    &lt;!&ndash; Copyright &ndash;&gt;-->
  <!--  </div>-->
</div>

<div style="overflow-x: hidden;">
<h3 style="margin-left: 295px;">Chi tiết đơn hàng của {{order.name_acount}}</h3>
<div style="float: right;display: flex;">
  <h6>Tình trạng đơn hàng:</h6>
  <h6><i style="color:#0dcaf0">{{order.statusName}}</i></h6>

</div>
<div style="margin-bottom: 30px;display: flex; margin-top: 15px;margin-left: 295px;">
  <span *ngIf="order.status ==0">
    <button class="btn btn-success" (click)="openmadal(content,'1')">Xác nhận đơn hàng</button>
  </span>
  <span *ngIf="order.status ==0 || order.status ==1 || order.status ==2">
    <button class="btn btn-danger ms-3" (click)="openmadal(content,'4')">Hủy đơn hàng</button>
  </span>
  <span *ngIf="order.status ==1">
    <button class="btn btn-success ms-3" (click)="openmadal(content,'2')">Giao hàng</button>
  </span>
  <span *ngIf="order.status ==2">
    <button class="btn btn-success ms-3" (click)="openmadal(content,'3')">Hoàn thành</button>
  </span>
  <span>
    <button class="btn btn-success ms-3" (click)="openmodaltimeline(timeline)">Chi tiết</button>
  </span>
  <br>
<!--  <span *ngIf="order.status ==1">-->
<!--    <button (click)="pdfphieugiaohang(order.id)" class="btn btn-warning ms-3">In phiếu giao <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer" viewBox="0 0 16 16">-->
<!--      <path d="M2.5 8a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1z"/>-->
<!--      <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v3a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>-->
<!--    </svg></button>-->
<!--  </span>-->
</div>
<div class="card" style="margin-left: 295px;">
  <h5 class="card-title p-3">Thông tin khách hàng</h5>
  <div class="card-body">
    <div class="row">
      <div class=" col-6">
        <p>Thông tin cơ bản </p>
        <div class="card " style="height: 200px;background-color: #dadbdf">
          <div class="row">
            <div class="col-6">
              <label>Tên khách hàng</label><br>
              <label><b>{{order.name_acount}}</b></label>
              <br>
              <label>Email</label><br>
              <label><b>{{order.email}}</b></label>
              <br>

              <label>Số điện thoai</label><br>
              <label><b>{{order.sdt}}</b></label>
            </div>
            <div class="col-6">
              <label>Mã khách hàng</label><br>
              <label><b>MKH:KH-00000{{order.account_id}}</b></label><br>

              <label>Địa chỉ</label><br>
              <label><b>{{order.address}}</b></label>
            </div>
          </div>
        </div>
      </div>
      <div class=" col-6">
        <p>Địa chỉ giao hàng </p>
        <div class="card" style="height: 200px;background-color: #dadbdf">
          <div class="row">
            <div class="col-6">
              <label>Địa chỉ chi tiết:</label>
              <label><b>{{order.addressinfo}}</b></label>
              <br>
              <label>Số điện thoại</label><br>
              <label><b>{{order.sdtinfo}}</b></label>
            </div>
            <div class="col-5">
              <label>Tên người nhận</label><br>
              <label><b>{{order.nameinfo}}</b></label>
            </div>

              <div class="col-1" *ngIf="order.status==0">
              <button (click)="opencustomerinfo(customerinfo)">sửa</button>
            </div>

          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<div class="row mt-3" style="margin-left: 295px;">
  <label class="col-1">Ảnh</label>
  <label class="col-2 ms-3">Tên sản phẩm</label>
  <label class="col-1">Số lượng</label>
  <label class="col-1">Giá tiền</label>
  <label class="col-2">Tình trạng</label>
  <label class="col-2">Đơn vị vận chuyển</label>
  <label class="col-2">Thao tác</label>

</div>
<div style="height: auto;padding-bottom: 100px;margin-left: 295px;">
  <div class="card mb-2" *ngFor="let item of litorderdetail">
    <div class="row ">

      <div class=" col-1 m-2">
        <img src="https://enternalproduct.s3.ap-southeast-1.amazonaws.com/{{item.photo}}" alt=""
             width="120px" height="100">
      </div>
      <label class="col-2 mt-4"><b>{{item.productName}} {{item.brand_name}} {{item.namecolor}}</b> </label>

      <label class="col-1 mt-4">x{{item.quantity}},Size:{{item.valuesize}}</label>
      <label  class="col-1 mt-4"><b>{{item.price| currency :'VND'}}</b></label>
      <label class="col-2 mt-4"><b>{{item.statusName}}</b></label>
      <label class="col-2 mt-4">Đơn vị vận chuyển nhanh</label>
      <div class="col-1 mt-4">
        <span *ngIf="order.status ==0">
          <button class="btn btn-danger" (click)="delete(item.detail_id)"> Xóa</button>
        </span>

      </div>

    </div>
  </div>
  <span *ngIf="order.status ==0">
  <div>
    <button class="btn btn-success" (click)="openProduct(product)">Thêm sản phẩm</button>
  </div>
    </span>
</div>
<div>
  <ng-template #content>
    <div>
      <h4>Xác nhận</h4>
      <label  style="display: block;">Ghi chú:</label>
      <textarea [(ngModel)]="description" style="width: 100%;height: 150px">

      </textarea>
      <br>
      <button class="btn btn-primary" (click)="updatetrangthai(order.id)">OK</button>
    </div>
    </ng-template>
</div>

<!--timeline-->
<div >
  <ng-template #timeline>
    <table class="table table-borderless">
      <thead>
      <tr class="text-center">
        <th scope="col">Trạn thái</th>
        <th scope="col">Thời gian</th>
        <th scope="col">Người xác nhận</th>
        <th scope="col">Ghi chú</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let item of listordertimeline" class="text-center">
        <th scope="row">{{item.type}}</th>
        <td>{{item.create_date}}</td>
        <td>{{item.account_name}}</td>
        <td>{{item.description}}</td>
      </tr>

      </tbody>
    </table>
  </ng-template>

</div>
</div>
<!--modale customerinfo-->
  <ng-template #customerinfo>
    <div>
      <h5>Thông tin giao hàng</h5>
      <hr>

        <div class="row ">
          <div class="form-group col-6  mb-3">
            <label for="inputten">Họ và tên</label>
            <input class="form-control" type="text" id="inputten" [(ngModel)]="name4">
          </div>
          <div class="form-group col-6  mb-3">
            <label for="inputSDT">SDT</label>
            <input class="form-control" type="text" id="inputSDT" [(ngModel)]="sdt4" >
          </div>
          <div class="col-6 mb-3">
            <select #selectTp (change)="laytp(selectTp.value)" class="form-select "
                    aria-label="Default select example">
              <option selected>Mời chọn thành phố</option>
              <option *ngFor="let itemtp of litthanhpho" [value]="itemtp.id">{{itemtp.name}}</option>

            </select>
          </div>
          <div class="col-6 mb-3">
            <select #selecthuyen (change)="layhuyen(selecthuyen.value)" class="form-select "
                    aria-label="Default select example">
              <option selected>Mời chọn huyện</option>
              <option *ngFor="let itemtp of lithuyen" [value]="itemtp.id">{{itemtp.name}}</option>

            </select>
          </div>
          <div class="col-6 mb-3">
            <select class="form-select "
                    aria-label="Default select example" #selectxa (change)="layxa(selectxa.value)">
              <option selected>Mời chọn xã</option>
              <option *ngFor="let itemtp of litxa" [value]="itemtp.id">{{itemtp.name}}</option>

            </select>
          </div>
          <div class="form-group col-12  mb-3" >
            <label for="inputdiachi">Địa chỉ</label>
            <input class="form-control" type="text" id="inputdiachi"  [(ngModel)]="addres">
          </div>
          <div class="col-3" style="margin-top: 20px;">
            <button class="btn btn-success" (click)=editcustomerinfo(order.customerinfo_id)>Thêm mới</button>
          </div>
        </div>


    </div>
  </ng-template>
<!--  modal thêm sản phẩm-->
  <ng-template #product>
    <div class="input-group mt-3">
      <div class="form-outline">
        <input type="search" id="form" class="form-control" [(ngModel)]="namesot"/>
        <label class="form-label" for="form"></label>
      </div>
      <button type="button" class="btn btn-primary">
        <i class="fas fa-search" (click)="openProduct(product)"></i>
      </button>

    </div>
    <hr>
    <table class="table table-hover p-3">
      <thead>
      <tr>
        <th scope="col" style="padding-left: 25px;">Ảnh</th>
        <th scope="col" style="padding-left: 130px;">Name</th>
        <th scope="col">Giá</th>
        <th scope="col">Màu</th>
        <th scope="col">Size</th>
        <th scope="col">Thao tác</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let item of litproduct">
        <th><img src="https://enternalproduct.s3.ap-southeast-1.amazonaws.com/{{item.photo}}" alt=""
                 width="120px" height="100"></th>
        <th>{{item.name}}</th>
        <th style="padding-left: 25px;">{{item.outputprice| currency :'VND' }}</th>
        <th>
          <select #selectColor (change)="laycolor(selectColor.value,item.id)" class="form-select "
                  aria-label="Default select example">
            <option selected>Mời chọn</option>
            <option *ngFor="let itemmau of mau" [value]="itemmau.id">{{itemmau.name}}</option>

          </select>
        </th>
        <th>
          <select #selectSize (change)="laysize(selectSize.value)" class="form-select "
                  aria-label="Default select example">
            <option selected>Mời chọn</option>
            <option *ngFor="let itemsize of size" [value]="itemsize.id">{{itemsize.value}}</option>

          </select>
        </th>
        <th style="padding-left: 25px;">
          <button class="btn btn-primary" (click)=" giohang(order.id,item.id,item.outputprice)">Thêm</button>
        </th>
      </tr>
      </tbody>
    </table>
  </ng-template>
</div>
